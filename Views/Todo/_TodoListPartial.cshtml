@model web_groupware.Models.TodoViewModel

@foreach (var item in Model.fileList)
{
    <div class="col-12 todo" data-id="@item.todo_no" data-status="@item.response_status" data-deadline="@item.deadline_set" data-user="@item.staf_cd">
        <div class="card mb-3">
            <div class="card-header justify-content-between">
                <span></span>
                <span>時刻：@item.create_date</span>
            </div>
            <div class="card-body">
                <div class="card-text">
                    <div class="d-flex justify-content-between fs-4 fw-bold my-1">
                        <div class="col-4">
                            @if (item.title.Length <= 20)
                            {
                                <span>@item.title</span>
                            }
                            else
                            {
                                <span>@item.title.Substring(0, 20)</span>
                                <span>...</span>
                            }
                        </div>
                        <span class="col-2">@((item.group_set == 0) ? "複数人" : "グループ")</span>

                        <span class="col-2">@((item.deadline_set == 0) ? "期限なし" : "期限あり")</span>
                        @if (item.deadline_date != null)
                        {
                            <span class="col-3 deadline-date" data-deadline-date="@item.deadline_date">@item.deadline_date</span>
                        }
                        else
                        {
                            <span class="col-3"></span>
                        }
                        @* @if(item.has_file == 1)
                        {
                            <div class="d-flex justify-content-between">
                                <i class="fa fa-file"></i>
                            </div>
                        } *@
                        @{
                            switch (item.response_status)
                            {
                                case 0:
                                    <div class="fs-4 fw-bold bg-warning rounded-pill px-2">
                                        未対応
                                    </div>
                                    break;
                                case 1:
                                    <div class="fs-4 fw-bold bg-info rounded-pill px-2">
                                        対応中
                                    </div>
                                    break;
                                default:
                                    <div class="fs-4 fw-bold bg-primary rounded-pill px-2">
                                        完了
                                    </div>
                                    break;
                            }
                        }
                    </div>
                </div>

            </div>
            <div class="card-footer justify-content-between">
                <a class="btn btn-primary btnUpdate">
                    <i class="bi bi-pencil"></i> 変更
                </a>
                <a class="btn btn-danger btnDelete">
                    <i class="bi bi-trash3"></i> 削除
                </a>
            </div>
        </div>
    </div>
}

@section Scripts {
    @{
        await Html.RenderPartialAsync("_ValidationScriptsPartial");
        <script src="~/js/Todo.js" asp-append-version="true"></script>
    }
    
}